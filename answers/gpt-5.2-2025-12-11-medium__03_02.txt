{
  "definitions": {
    "id": "Defs_SupportTicketProcess",
    "targetNamespace": "http://example.com/bpmn/support-ticket",
    "processes": [
      {
        "id": "Process_SupportTicket",
        "name": "Customer Support Ticket Handling",
        "isExecutable": true,
        "flowElements": [
          {
            "id": "StartEvent_EmailReceived",
            "type": "startEvent",
            "name": "Support E-mail Received",
            "eventDefinition": {
              "type": "messageEventDefinition",
              "messageRef": "Message_SupportEmailReceived"
            }
          },
          {
            "id": "Task_ParseEmail",
            "type": "serviceTask",
            "name": "Parse E-mail"
          },
          {
            "id": "Task_CreateTicket",
            "type": "serviceTask",
            "name": "Create Ticket"
          },
          {
            "id": "Task_InitialClassification",
            "type": "userTask",
            "name": "Initial Classification"
          },
          {
            "id": "Gateway_SimpleOrComplex",
            "type": "exclusiveGateway",
            "name": "Route: Simple or Complex"
          },
          {
            "id": "Task_RootCauseAnalysis",
            "type": "userTask",
            "name": "Root Cause Analysis"
          },
          {
            "id": "Task_ProvideResolution",
            "type": "userTask",
            "name": "Provide Resolution"
          },
          {
            "id": "Gateway_Parallel_ResponseAndKB_Split",
            "type": "parallelGateway",
            "name": "Parallel: Respond and Log"
          },
          {
            "id": "Task_SendResponseToCustomer",
            "type": "userTask",
            "name": "Send Response to Customer"
          },
          {
            "id": "Gateway_WaitForReplyOrTimeout",
            "type": "eventBasedGateway",
            "name": "Wait up to 24 hours for Customer Reply"
          },
          {
            "id": "Event_CustomerReply",
            "type": "intermediateCatchEvent",
            "name": "Customer Reply",
            "eventDefinition": {
              "type": "messageEventDefinition",
              "messageRef": "Message_CustomerReply"
            }
          },
          {
            "id": "Event_Timeout24Hours",
            "type": "intermediateCatchEvent",
            "name": "24 Hours Passed (No Reply)",
            "eventDefinition": {
              "type": "timerEventDefinition",
              "timeDuration": "PT24H"
            }
          },
          {
            "id": "Task_SendReminder",
            "type": "serviceTask",
            "name": "Send Reminder"
          },
          {
            "id": "Task_CloseTicket",
            "type": "userTask",
            "name": "Close Ticket"
          },
          {
            "id": "Task_LogSolutionInKB",
            "type": "userTask",
            "name": "Log Solution in Knowledge Base"
          },
          {
            "id": "Gateway_Parallel_ResponseAndKB_Join",
            "type": "parallelGateway",
            "name": "Join: Respond and Log Completed"
          },
          {
            "id": "EndEvent_Completed",
            "type": "endEvent",
            "name": "Process Completed"
          },
          {
            "id": "EventSubProcess_CancelTicket",
            "type": "eventSubProcess",
            "name": "Cancel Ticket (Any Time Before Closure)",
            "triggeredByEvent": true,
            "isInterrupting": true,
            "flowElements": [
              {
                "id": "StartEvent_CustomerCancels",
                "type": "startEvent",
                "name": "Customer Cancels Ticket",
                "eventDefinition": {
                  "type": "messageEventDefinition",
                  "messageRef": "Message_CustomerCancelsTicket"
                }
              },
              {
                "id": "EndEvent_TerminateOnCancel",
                "type": "endEvent",
                "name": "Terminate",
                "eventDefinition": {
                  "type": "terminateEventDefinition"
                }
              }
            ],
            "sequenceFlows": [
              {
                "id": "Flow_Cancel_To_Terminate",
                "sourceRef": "StartEvent_CustomerCancels",
                "targetRef": "EndEvent_TerminateOnCancel"
              }
            ]
          }
        ],
        "sequenceFlows": [
          {
            "id": "Flow_Start_To_Parse",
            "sourceRef": "StartEvent_EmailReceived",
            "targetRef": "Task_ParseEmail"
          },
          {
            "id": "Flow_Parse_To_Create",
            "sourceRef": "Task_ParseEmail",
            "targetRef": "Task_CreateTicket"
          },
          {
            "id": "Flow_Create_To_Classify",
            "sourceRef": "Task_CreateTicket",
            "targetRef": "Task_InitialClassification"
          },
          {
            "id": "Flow_Classify_To_Gateway",
            "sourceRef": "Task_InitialClassification",
            "targetRef": "Gateway_SimpleOrComplex"
          },
          {
            "id": "Flow_Gateway_To_ProvideResolution_Simple",
            "sourceRef": "Gateway_SimpleOrComplex",
            "targetRef": "Task_ProvideResolution",
            "conditionExpression": "${classification == 'Simple'}"
          },
          {
            "id": "Flow_Gateway_To_RCA_Complex",
            "sourceRef": "Gateway_SimpleOrComplex",
            "targetRef": "Task_RootCauseAnalysis",
            "conditionExpression": "${classification == 'Complex'}"
          },
          {
            "id": "Flow_RCA_To_ProvideResolution",
            "sourceRef": "Task_RootCauseAnalysis",
            "targetRef": "Task_ProvideResolution"
          },
          {
            "id": "Flow_ProvideResolution_To_ParallelSplit",
            "sourceRef": "Task_ProvideResolution",
            "targetRef": "Gateway_Parallel_ResponseAndKB_Split"
          },
          {
            "id": "Flow_ParallelSplit_To_SendResponse",
            "sourceRef": "Gateway_Parallel_ResponseAndKB_Split",
            "targetRef": "Task_SendResponseToCustomer"
          },
          {
            "id": "Flow_ParallelSplit_To_LogKB",
            "sourceRef": "Gateway_Parallel_ResponseAndKB_Split",
            "targetRef": "Task_LogSolutionInKB"
          },
          {
            "id": "Flow_SendResponse_To_EventBasedGateway",
            "sourceRef": "Task_SendResponseToCustomer",
            "targetRef": "Gateway_WaitForReplyOrTimeout"
          },
          {
            "id": "Flow_EventBasedGateway_To_CustomerReply",
            "sourceRef": "Gateway_WaitForReplyOrTimeout",
            "targetRef": "Event_CustomerReply"
          },
          {
            "id": "Flow_EventBasedGateway_To_Timeout",
            "sourceRef": "Gateway_WaitForReplyOrTimeout",
            "targetRef": "Event_Timeout24Hours"
          },
          {
            "id": "Flow_CustomerReply_To_Close",
            "sourceRef": "Event_CustomerReply",
            "targetRef": "Task_CloseTicket"
          },
          {
            "id": "Flow_Timeout_To_SendReminder",
            "sourceRef": "Event_Timeout24Hours",
            "targetRef": "Task_SendReminder"
          },
          {
            "id": "Flow_SendReminder_To_Close",
            "sourceRef": "Task_SendReminder",
            "targetRef": "Task_CloseTicket"
          },
          {
            "id": "Flow_Close_To_ParallelJoin",
            "sourceRef": "Task_CloseTicket",
            "targetRef": "Gateway_Parallel_ResponseAndKB_Join"
          },
          {
            "id": "Flow_LogKB_To_ParallelJoin",
            "sourceRef": "Task_LogSolutionInKB",
            "targetRef": "Gateway_Parallel_ResponseAndKB_Join"
          },
          {
            "id": "Flow_ParallelJoin_To_End",
            "sourceRef": "Gateway_Parallel_ResponseAndKB_Join",
            "targetRef": "EndEvent_Completed"
          }
        ],
        "messages": [
          {
            "id": "Message_SupportEmailReceived",
            "name": "Support E-mail Received"
          },
          {
            "id": "Message_CustomerReply",
            "name": "Customer Reply"
          },
          {
            "id": "Message_CustomerCancelsTicket",
            "name": "Customer Cancels Ticket"
          }
        ]
      }
    ]
  }
}