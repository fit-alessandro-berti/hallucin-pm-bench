<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
             xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC"
             xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI"
             id="wrc_definitions"
             targetNamespace="http://example.com/wrc">
  <process id="wrc_WarrantyReplacement_v1_3" name="Warranty-Replacement v1.3" isExecutable="true">
    <startEvent id="wrc_start" name="online warranty claim submitted"/>
    <exclusiveGateway id="wrc_gw_completeness" name="Claim complete?"/>
    <task id="wrc_validate_claim" name="validates the claim"/>
    <task id="wrc_request_missing_info" name="requests missing information"/>
    <intermediateCatchEvent id="wrc_wait_info" name="Missing information received">
      <timerEventDefinition/>
    </intermediateCatchEvent>
    <exclusiveGateway id="wrc_gw_warranty" name="Within warranty?"/>
    <task id="wrc_check_warranty" name="checks warranty eligibility"/>
    <task id="wrc_send_rejection" name="send rejection notice"/>
    <endEvent id="wrc_end_rejected" name="End - Rejected"/>
    <parallelGateway id="wrc_gw_parallel_split" name="Parallel split"/>
    <task id="wrc_create_shipment" name="Create shipment order"/>
    <task id="wrc_schedule_pickup" name="Schedule courier pickup"/>
    <parallelGateway id="wrc_gw_parallel_join" name="Parallel join"/>
    <task id="wrc_update_inventory" name="update inventory records"/>
    <task id="wrc_close_claim" name="close the claim"/>
    <endEvent id="wrc_end_success" name="End - Completed"/>

    <sequenceFlow id="wrc_sf_start_to_completeness_gw" sourceRef="wrc_start" targetRef="wrc_gw_completeness"/>
    <sequenceFlow id="wrc_sf_completeness_to_validate" sourceRef="wrc_gw_completeness" targetRef="wrc_validate_claim">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${complete}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="wrc_sf_completeness_to_request" sourceRef="wrc_gw_completeness" targetRef="wrc_request_missing_info">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${!complete}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="wrc_sf_request_to_wait" sourceRef="wrc_request_missing_info" targetRef="wrc_wait_info"/>
    <sequenceFlow id="wrc_sf_wait_to_completeness_gw" sourceRef="wrc_wait_info" targetRef="wrc_gw_completeness"/>

    <sequenceFlow id="wrc_sf_validate_to_warranty" sourceRef="wrc_validate_claim" targetRef="wrc_gw_warranty"/>
    <sequenceFlow id="wrc_sf_warranty_to_check" sourceRef="wrc_gw_warranty" targetRef="wrc_check_warranty">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${unknown}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="wrc_sf_check_to_warranty" sourceRef="wrc_check_warranty" targetRef="wrc_gw_warranty"/>

    <sequenceFlow id="wrc_sf_warranty_in_to_parallel" sourceRef="wrc_gw_warranty" targetRef="wrc_gw_parallel_split">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${withinWarranty}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="wrc_sf_warranty_out_to_reject" sourceRef="wrc_gw_warranty" targetRef="wrc_send_rejection">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${!withinWarranty}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="wrc_sf_reject_to_end" sourceRef="wrc_send_rejection" targetRef="wrc_end_rejected"/>

    <sequenceFlow id="wrc_sf_parallel_to_shipment" sourceRef="wrc_gw_parallel_split" targetRef="wrc_create_shipment"/>
    <sequenceFlow id="wrc_sf_parallel_to_pickup" sourceRef="wrc_gw_parallel_split" targetRef="wrc_schedule_pickup"/>
    <sequenceFlow id="wrc_sf_shipment_to_join" sourceRef="wrc_create_shipment" targetRef="wrc_gw_parallel_join"/>
    <sequenceFlow id="wrc_sf_pickup_to_join" sourceRef="wrc_schedule_pickup" targetRef="wrc_gw_parallel_join"/>

    <sequenceFlow id="wrc_sf_join_to_update" sourceRef="wrc_gw_parallel_join" targetRef="wrc_update_inventory"/>
    <sequenceFlow id="wrc_sf_update_to_close" sourceRef="wrc_update_inventory" targetRef="wrc_close_claim"/>
    <sequenceFlow id="wrc_sf_close_to_end" sourceRef="wrc_close_claim" targetRef="wrc_end_success"/>
  </process>

  <bpmndi:BPMNDiagram id="wrc_diagram">
    <bpmndi:BPMNPlane id="wrc_plane" bpmnElement="wrc_WarrantyReplacement_v1_3"/>
  </bpmndi:BPMNDiagram>
</definitions>