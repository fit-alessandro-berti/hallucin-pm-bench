{
  "definitions": {
    "$type": "bpmn:Definitions",
    "id": "Definitions_SupportTicket",
    "targetNamespace": "http://bpmn.io/schema/bpmn",
    "messages": [
      { "id": "Message_SupportEmail", "name": "Support Email Received" },
      { "id": "Message_CustomerReply", "name": "Customer Reply" },
      { "id": "Message_CustomerCancel", "name": "Customer Cancel" }
    ],
    "processes": [
      {
        "$type": "bpmn:Process",
        "id": "Process_SupportTicket",
        "name": "Support Ticket Process",
        "isExecutable": true,
        "flowElements": [
          { "$type": "bpmn:StartEvent", "id": "StartEvent_SupportEmail", "name": "Support Email Received", "eventDefinition": { "type": "bpmn:MessageEventDefinition", "messageRef": "Message_SupportEmail" }, "outgoing": ["Flow_Start_Parse"] },
          { "$type": "bpmn:Task", "id": "Task_ParseEmail", "name": "Parse Email", "incoming": ["Flow_Start_Parse"], "outgoing": ["Flow_Parse_CreateTicket"] },
          { "$type": "bpmn:Task", "id": "Task_CreateTicket", "name": "Create Ticket", "incoming": ["Flow_Parse_CreateTicket"], "outgoing": ["Flow_Create_Classify"] },
          { "$type": "bpmn:UserTask", "id": "Task_InitialClassification", "name": "Initial Classification", "incoming": ["Flow_Create_Classify"], "outgoing": ["Flow_Classify_Gateway"] },
          { "$type": "bpmn:ExclusiveGateway", "id": "Gateway_Classify", "name": "Simple or Complex", "incoming": ["Flow_Classify_Gateway"], "outgoing": ["Flow_Gateway_Simple", "Flow_Gateway_Complex"] },
          { "$type": "bpmn:Task", "id": "Task_RootCause", "name": "Root Cause Analysis", "incoming": ["Flow_Gateway_Complex"], "outgoing": ["Flow_RootCause_Provide"] },
          { "$type": "bpmn:Task", "id": "Task_ProvideResolution", "name": "Provide Resolution", "incoming": ["Flow_Gateway_Simple", "Flow_RootCause_Provide"], "outgoing": ["Flow_Provide_Parallel"] },
          { "$type": "bpmn:ParallelGateway", "id": "Gateway_ParallelSplit", "incoming": ["Flow_Provide_Parallel"], "outgoing": ["Flow_Parallel_SendResponse", "Flow_Parallel_LogSolution"] },
          { "$type": "bpmn:Task", "id": "Task_SendResponse", "name": "Send Response to Customer", "incoming": ["Flow_Parallel_SendResponse"], "outgoing": ["Flow_SendResponse_WaitGateway"] },
          { "$type": "bpmn:EventBasedGateway", "id": "Gateway_WaitForReply", "name": "Wait for Reply or 24h", "incoming": ["Flow_SendResponse_WaitGateway"], "outgoing": ["Flow_Wait_CustomerReply", "Flow_Wait_24h"] },
          { "$type": "bpmn:IntermediateCatchEvent", "id": "Event_CustomerReply", "name": "Customer Reply", "eventDefinition": { "type": "bpmn:MessageEventDefinition", "messageRef": "Message_CustomerReply" }, "incoming": ["Flow_Wait_CustomerReply"], "outgoing": ["Flow_Reply_Close"] },
          { "$type": "bpmn:IntermediateCatchEvent", "id": "Event_24hTimer", "name": "24 Hours", "eventDefinition": { "type": "bpmn:TimerEventDefinition", "timeDuration": "PT24H" }, "incoming": ["Flow_Wait_24h"], "outgoing": ["Flow_Timer_Reminder"] },
          { "$type": "bpmn:Task", "id": "Task_SendReminder", "name": "Send Reminder", "incoming": ["Flow_Timer_Reminder"], "outgoing": ["Flow_Reminder_Close"] },
          { "$type": "bpmn:Task", "id": "Task_CloseTicket", "name": "Close Ticket", "incoming": ["Flow_Reply_Close", "Flow_Reminder_Close"], "outgoing": ["Flow_Close_Join"] },
          { "$type": "bpmn:Task", "id": "Task_LogSolution", "name": "Log Solution in Knowledge Base", "incoming": ["Flow_Parallel_LogSolution"], "outgoing": ["Flow_LogSolution_Join"] },
          { "$type": "bpmn:ParallelGateway", "id": "Gateway_ParallelJoin", "incoming": ["Flow_Close_Join", "Flow_LogSolution_Join"], "outgoing": ["Flow_Join_End"] },
          { "$type": "bpmn:EndEvent", "id": "EndEvent_ProcessComplete", "name": "Process End", "incoming": ["Flow_Join_End"] },
          { "$type": "bpmn:SequenceFlow", "id": "Flow_Start_Parse", "sourceRef": "StartEvent_SupportEmail", "targetRef": "Task_ParseEmail" },
          { "$type": "bpmn:SequenceFlow", "id": "Flow_Parse_CreateTicket", "sourceRef": "Task_ParseEmail", "targetRef": "Task_CreateTicket" },
          { "$type": "bpmn:SequenceFlow", "id": "Flow_Create_Classify", "sourceRef": "Task_CreateTicket", "targetRef": "Task_InitialClassification" },
          { "$type": "bpmn:SequenceFlow", "id": "Flow_Classify_Gateway", "sourceRef": "Task_InitialClassification", "targetRef": "Gateway_Classify" },
          { "$type": "bpmn:SequenceFlow", "id": "Flow_Gateway_Simple", "name": "Simple", "sourceRef": "Gateway_Classify", "targetRef": "Task_ProvideResolution" },
          { "$type": "bpmn:SequenceFlow", "id": "Flow_Gateway_Complex", "name": "Complex", "sourceRef": "Gateway_Classify", "targetRef": "Task_RootCause" },
          { "$type": "bpmn:SequenceFlow", "id": "Flow_RootCause_Provide", "sourceRef": "Task_RootCause", "targetRef": "Task_ProvideResolution" },
          { "$type": "bpmn:SequenceFlow", "id": "Flow_Provide_Parallel", "sourceRef": "Task_ProvideResolution", "targetRef": "Gateway_ParallelSplit" },
          { "$type": "bpmn:SequenceFlow", "id": "Flow_Parallel_SendResponse", "sourceRef": "Gateway_ParallelSplit", "targetRef": "Task_SendResponse" },
          { "$type": "bpmn:SequenceFlow", "id": "Flow_Parallel_LogSolution", "sourceRef": "Gateway_ParallelSplit", "targetRef": "Task_LogSolution" },
          { "$type": "bpmn:SequenceFlow", "id": "Flow_SendResponse_WaitGateway", "sourceRef": "Task_SendResponse", "targetRef": "Gateway_WaitForReply" },
          { "$type": "bpmn:SequenceFlow", "id": "Flow_Wait_CustomerReply", "sourceRef": "Gateway_WaitForReply", "targetRef": "Event_CustomerReply" },
          { "$type": "bpmn:SequenceFlow", "id": "Flow_Wait_24h", "sourceRef": "Gateway_WaitForReply", "targetRef": "Event_24hTimer" },
          { "$type": "bpmn:SequenceFlow", "id": "Flow_Reply_Close", "sourceRef": "Event_CustomerReply", "targetRef": "Task_CloseTicket" },
          { "$type": "bpmn:SequenceFlow", "id": "Flow_Timer_Reminder", "sourceRef": "Event_24hTimer", "targetRef": "Task_SendReminder" },
          { "$type": "bpmn:SequenceFlow", "id": "Flow_Reminder_Close", "sourceRef": "Task_SendReminder", "targetRef": "Task_CloseTicket" },
          { "$type": "bpmn:SequenceFlow", "id": "Flow_LogSolution_Join", "sourceRef": "Task_LogSolution", "targetRef": "Gateway_ParallelJoin" },
          { "$type": "bpmn:SequenceFlow", "id": "Flow_Close_Join", "sourceRef": "Task_CloseTicket", "targetRef": "Gateway_ParallelJoin" },
          { "$type": "bpmn:SequenceFlow", "id": "Flow_Join_End", "sourceRef": "Gateway_ParallelJoin", "targetRef": "EndEvent_ProcessComplete" }
        ],
        "eventSubProcesses": [
          {
            "$type": "bpmn:SubProcess",
            "id": "EventSubProcess_Cancel",
            "name": "Customer Cancel",
            "triggeredByEvent": true,
            "flowElements": [
              { "$type": "bpmn:StartEvent", "id": "StartEvent_Cancel", "name": "Customer Cancels", "isInterrupting": true, "eventDefinition": { "type": "bpmn:MessageEventDefinition", "messageRef": "Message_CustomerCancel" }, "outgoing": ["Flow_Cancel_Terminate"] },
              { "$type": "bpmn:EndEvent", "id": "EndEvent_Terminate", "name": "Terminate Process", "incoming": ["Flow_Cancel_Terminate"], "eventDefinition": { "type": "bpmn:TerminateEventDefinition" } },
              { "$type": "bpmn:SequenceFlow", "id": "Flow_Cancel_Terminate", "sourceRef": "StartEvent_Cancel", "targetRef": "EndEvent_Terminate" }
            ]
          }
        ]
      }
    ]
  }
}